# 数据分析
## 业务题
### **费米估算问题**
1. 总体原则：自上而下拆解，自下而上计算。
2. 涉及分析方法：逻辑树分析、多维度拆解分析。
3. 目标：估算结果上下浮动范围不超过10倍即可
---
- **确认估算对象**：确认是否需要细化对象or转化对象
1. 估算一个**星巴克门店的销售额**：根据二八法则，星巴克的销售产品主要以饮品为主，而饮品主要以咖啡为主，因此估算对象确定为**咖啡的销售额**
2. 估算**芝加哥有多少名钢琴调音师**：将芝加哥的钢琴调音师数量转换为->**芝加哥每年需要调音的钢琴数量 / 每个调音师每年能调多少台钢琴**
```
二八法则：
    在任何一组东西中，最重要的只占其中一小部分，约20%，其余80%尽管是多数，但确是次要的。80/20法则是不受人为直接控制的，它是自然而然形成的。
```

- **拆解估算对象**
1. **需求维度**：
<br>需求值 =市场总需求规模 = 需求单位数 × 单位需求量 × 单位需求频次
<br>需求单位数 = 需求人群 × 人群转化率
```
eg：估算北京市一日卖出的油条数量。

需求单位数 = 北京市吃油条的人数 = 需求人群 × 人群转化率 = 北京市人口 × 选择吃油条的比例 = 约2000万人 × 约5% ≈ 100 万人

需求值 = 北京市一日卖出的油条数量 =需求单位数 × 单位需求量 × 单位需求频次 = 北京市吃油条的人数 × 每次吃几根 × 一天吃几次 = 100万人 × 1根/次 × 每天只早餐吃1次 ≈ 100万根油条
```
2. **供给维度**
<br>供给值 = 市场总供给能力 = 供给单位数 × 单位供给量 × 供给时段
<br>供给单位数 = 市场总区域 / 单位平均辐射区域
```
eg：估算北京市一日卖出的油条数量。

供给单位数 = 北京油条店的数目 = 市场总区域 / 单位平均辐射区域 = 北京市面积 / (五环内每1平方千米有2家油条店，五环外每2平方千米有1家油条店) = 约735万平方千米*2 + 约15700平方千米 / 2 ≈ 9320家店

供给时段 = SUM(不同时段时间) = 1天

供给值 = 北京市一日卖出的油条数量 = 供给单位数 × 单位供给量 × 供给时间 = 9320家店 × 100根/天 × 1天 ≈ 93.2万根油条
```

- **对比估算结果**
1. 供需是会**动态平衡**的，因此若需求层和供给层算出的估计值相差在**合理范围**内（不要差得太离谱就可以），则可以得出一个大致的估计值or估计范围
```
北京市一日卖出的油条数量大约在93.2万~100万根油条（or大约96.5万根）
```
2. 若相差太离谱，可能需要重新考虑上述计算的过程，或者直接进入下一环节

- **关注可能的误差**
1. 最后需要列出可能出现误差的**影响因素**
```
比如：需求人群可以再进一步细分、供给单位的平均辐射区域大小有待考证……
```
2. 可以根据实际情况给出一些未来的**改进办法**
```
比如：抽样调查、观测历史数据……
```

### **A/B测试**
涉及分析方法：对比分析、假设检验分析、群组（同期群）分析
- 定义
```
A/B test，又称分组隔离实验，简单来讲，A/B测试是一种比较手段：通过分析同一总体下，由于某些不同的策略导致样本数据表现出的差异，来推断某些策略的效果
```
1. 理解：为了同一个目标，制定多个方案并行测试，每个方案只有1个变量不同。让相似的用户群组使用各个不同的方案，收集每种方案的数据后，以某种规则选出最优方案
2. 本质：假设检验的一种实际应用（控制变量）

- 应用场景
1. 产品迭代：如界面优化（改字体、增弹窗等）、功能增加、流程增加……
2. 策略优化：如算法策略、运营策略、营销策略……
3. 作用：科学量化各个方案的效果（如ROI<投资回报率>等），衡量决策收益，避免拍脑袋决定
```
不适用的场景：
1. 用户体验的制约（如价格调整）
2. 样本数量制约（如防止侵害的安全类事件）
3. AB组间存在干扰（如滴滴司机间有司机群）
```

- 科学依据
```
科学的实验设计；
1. 科学的采样（随机化）
2. 科学的流量分割（正交与互斥）
   A/B测试从应用到系统搭建：https://zhuanlan.zhihu.com/p/79690021
   AB测试案例拆解-流量分配：https://zhuanlan.zhihu.com/p/359586351
3. 科学的统计学原理（假设检验）
   假设检验：https://www.zhihu.com/tardis/zm/art/86178674?source_id=1005
   ps：大/小样本 -> z/t 分布
```
双边检验：
$$
Power = \Phi(\frac{\mu_x-\mu_y}{\sqrt{s_x^2/n_x+s_y^2/n_y}}-Z_{1-\alpha/2})=1-\beta
$$
$$
if\ n_x=n_y=n,\ then\ n=\frac{(Z_{1-\alpha/2}+Z_{1-\beta})^2*(s_x^2+s_y^2)}{(\mu_x-\mu_y)^2}
$$